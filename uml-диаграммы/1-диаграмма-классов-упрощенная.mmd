classDiagram
    class СущностьПользователя {
        -число идентификатор
        -строка электроннаяПочта
        -строка пароль
        -строка полноеИмя
        +СущностьФайла[] файлы
    }

    class СущностьФайла {
        -число идентификатор
        -строка имяФайла
        -строка оригинальноеИмя
        -число размер
        -строка типMIME
        -число идентификаторПользователя
        -Дата датаСоздания
        -Дата датаУдаления
        -логический вИзбранном
        +СущностьПользователя пользователь
    }

    class ТипФайла {
        <<перечисление>>
        ФОТОГРАФИИ
        КОРЗИНА
        ИЗБРАННОЕ
    }

    class СервисПользователей {
        +найтиПоПочте(почта: строка) Обещание~СущностьПользователя~
        +найтиПоИдентификатору(идентификатор: строка) Обещание~СущностьПользователя~
        +создать(данные: объект) Обещание~СущностьПользователя~
    }

    class СервисФайлов {
        +найтиВсе(идентификаторПользователя: число, типФайла?: ТипФайла) Обещание~СущностьФайла[]~
        +создать(файл: объект, идентификаторПользователя: строка) Обещание~СущностьФайла~
        +удалить(идентификаторПользователя: строка, идентификаторы: строка) Обещание~пусто~
        +восстановить(идентификаторПользователя: строка, идентификаторы: строка) Обещание~объект~
        +переключитьИзбранное(идентификаторПользователя: число, идентификаторФайла: число) Обещание~СущностьФайла~
        +получитьИзбранные(идентификаторПользователя: число) Обещание~СущностьФайла[]~
    }

    class СервисАутентификации {
        +проверитьПользователя(почта: строка, пароль: строка) Обещание~объект~
        +зарегистрировать(данные: объект) Обещание~объект~
        +войти(пользователь: СущностьПользователя) Обещание~объект~
    }

    %% Основные связи между сущностями
    СущностьПользователя "1" *-- "много" СущностьФайла : владеет
    СущностьФайла "много" --> "1" СущностьПользователя : принадлежит

    %% Связи сервисов с сущностями
    СервисПользователей ..> СущностьПользователя : работает с
    СервисФайлов ..> СущностьФайла : работает с
    СервисФайлов ..> ТипФайла : использует
    СервисАутентификации ..> СущностьПользователя : работает с
    СервисАутентификации ..> СервисПользователей : использует
